package library.book.implementation;

import java.util.*;
import java.io.*;


/**
 *
 * @author Denny
 */
public class LibraryReaderWriter {
    
    public final static class book{
            String name;
            int quantity;
    }
    
    //Function to read from .txt file
    public static Map<String, List<book>> Reader()throws FileNotFoundException{
        
        Scanner scanner = new Scanner(new File("library.txt"));
        
        Map<String, List<book>> map = new HashMap<String, List<book>>();
        
        List<book> Art = new ArrayList<book>();
        List<book> Business = new ArrayList<book>();
        List<book> Comp = new ArrayList<book>();
        List<book> Design = new ArrayList<book>();
        List<book> Education = new ArrayList<book>();
        List<book> Law = new ArrayList<book>();
        List<book> Math = new ArrayList<book>();
        List<book> Music = new ArrayList<book>();
        List<book> Philosophy = new ArrayList<book>();
        
        
        while(scanner.hasNextLine())
        {
          String data = scanner.nextLine();
          String[] library = data.split(";");
          book temp = new book();
          temp.name = library[1];
          temp.quantity = Integer.parseInt(library[2]);
          switch (library[0]){
              case "Art" :
                  Art.add(temp);
                  break;
              case "Business & Economics":
                  Business.add(temp);
                  break;
              case "Computer Science":
                  Comp.add(temp);
                  break;
              case "Design":
                  Design.add(temp);
                  break;
              case "Education":
                  Education.add(temp);
                  break;
              case "Law":
                  Law.add(temp);
                  break;
              case "Mathmatics":
                  Math.add(temp);
                  break;
              case "Music":
                  Music.add(temp);
                  break;
              case "Philosophy and Psychology":
                  Philosophy.add(temp);
                  break;
          }
        }
        
        map.put(Categories.ART.name, Art);
        map.put(Categories.BUS.name, Business);
        map.put(Categories.COMP.name, Comp);     
        map.put(Categories.DESIGN.name, Design);
        map.put(Categories.EDU.name, Education);
        map.put(Categories.LAW.name, Law);
        map.put(Categories.MATH.name, Math);
        map.put(Categories.MUSIC.name, Music);
        map.put(Categories.PHIL.name, Philosophy);
        
        scanner.close();
                                return map;
    }
    
    public static void Writer(Map<String, List<book>> library)throws FileNotFoundException{
        
        PrintWriter writing = new PrintWriter(new File("library.txt"));
        
        
        for (Map.Entry<String, List<book>> entry : library.entrySet()) {
            for(int i = 0; i < entry.getValue().size(); i++)
           {
               book temp = entry.getValue().get(i);
               writing.println(String.format("%s;%s;%d", entry.getKey(), temp.name, temp.quantity));
           }
           
        }
        writing.close();
    }
}
